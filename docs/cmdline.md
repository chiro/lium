> [!NOTE]
> This file is automatically generated by `make`.
> Please modify src/cmd/*.rs files and rebuild lium to update.

## Variables used in this guide

- `$CROS`
  - `/path/to/chromiumos`
- `$DUT`
  - `127.0.0.1` for IPv4 address
  - `[2001:db8::1234]` for IPv6 address
  - `dut_id` which contains `model_name` and `serial_number`
    - `lium dut list` displays the `dut_id` for registered DUTs
- `$BOARD`
  - `eve` for example
  - Same as `BOARD` variable explained in [the official documentation](https://chromium.googlesource.com/chromiumos/docs/+/HEAD/developer_guide.md#Select-a-board)
## ARC (Android Runtime on Chrome) related utilities
This feature is mainly for the internal developers.
## Build packages and images
```
lium build --cros $CROS --board brya --packages sys-kernel/arcvm-kernel-ack-5_10
lium build --full --cros $CROS --board brya
```
## Config lium behavior
```
lium config set default_cros_checkout /work/chromiumos_stable/
lium config show
```
## Deploy packages
```
lium deploy --cros $CROS --dut $DUT --package $PACKAGE_NAME --autologin
```
## DUT (Device Under Test) management
```
# SSH into a DUT using testing_rsa
lium dut shell --dut ${DUT}

# Execute a shell command on a DUT
lium dut shell --dut ${DUT} -- uname -a

# Add a DUT to the list
lium dut list --add ${IP}

# Show the list of DUTs registered
lium dut list

# Check connection and remove DUTs that have reused IP addresses
lium dut list --update

# Show DUT info
lium dut info --dut ${DUT}

# Show specific DUT info (e.g. ipv6_addr)
lium dut info --dut ${DUT} ipv6_addr

# Scan DUTs on a remote network
lium dut discover --remote ${REMOTE} | tee /tmp/dut_discovered.json
```
## Flash images (cros flash wrapper)
```
# Flash an image into a remote DUT
lium flash --cros ${CROS_DIR} --dut ${DUT}
# Flash an image into a USB stick
lium flash --cros ${CROS_DIR} --usb --board ${BOARD}
```
## Controlling a Servo (Hardware debugging tool)
Note: the official document is [here](https://chromium.googlesource.com/chromiumos/third_party/hdctools/+/HEAD/docs/servo.md)
```
# Show list of Servo / Cr50 devices
lium servo list

# Do the same thing in JSON format
lium servo list --json

# Reset Servo USB ports (useful when lium servo list does not work)
sudo `which lium` servo reset
```
## Get / update a ChromiumOS source checkout (similar to `git clone` or `git pull`)
```
lium sync --cros /work/chromiumos_stable/ --version 14899.0.0
lium sync --cros /work/chromiumos_stable/ --version R110-15263.0.0
# following command needs a mirror repo which has cloned with --mirror option
lium sync --cros /work/chromiumos_versions/R110-15248.0.0/ --version R110-15248.0.0 --reference /work/chromiumos_mirror/
lium sync --cros /work/chromiumos_versions/R110-15248.0.0/ --version R110-15248.0.0 # you can omit --reference if the config is set
```
